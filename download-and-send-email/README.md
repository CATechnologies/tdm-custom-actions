# TDM Action Service Example - Download & Copy
This action downloads a file generated by a generator and sends it to the provided email address.

Steps:
   * Download generated files (REST call, zip archive returned)
   * Send it to the email adress specified

## TDM Variables
Pass following variables to the action:
   * senderEmail - email of the sender, recipient will see from whom he get this email
   * recipientEmail - email to send downloaded data


## Environment variables which configure the container
This image inherits from the base TDM image. `PUBLISH_ACTION` is set in the [Dockerfile](Dockerfile) to point to
`download-and-send.sh` script.

When running the container, you have to define `ACTION_SECRET`.

`ACTION_SECRET` - choose a secret which you will enter when you create the Action in the UI.

This action needs to be able to connect to an SMTP server. The following variables define the connection:
   * smtpPort - port of SMTP server (e.g. 25)
   * smtpHost - address/hostname of the SMTP server (e.g. mystmp.example.com or 130.10.10.10)

Note that you can use a fake SMTP server to experiment with this action 
(e.g. [FakeSMTP](http://nilhcem.com/FakeSMTP/index.html)).

## To build the image locally
Use script [Docker.build.sh](Docker.build.sh).

Optionally, you can change version of TDM base image in [tdm.version.sh](../tdm.version.sh).

## To run the image
Use script [Docker.run.sh](Docker.run.sh).



